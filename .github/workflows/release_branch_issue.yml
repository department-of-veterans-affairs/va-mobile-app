name: "Create Release Branch Ticket"

on:
  create:
    branches:
      - release/v[0-9]+.[0-9]+.[0-9]+
jobs:
  release_ticket:
    runs-on: ubuntu-latest
    steps:
      - run: echo "VERSION=${GITHUB_REF##*/}" >> $GITHUB_ENV
      - run: echo "DUE_DATE=$(date -d "+6 days" '+%A %b %d, %Y')" >> $GITHUB_ENV
      - run: echo "RELEASE_DATE=$(date -d "+13 days" '+%A %b %d, %Y')" >> $GITHUB_ENV
      - uses: actions/checkout@v2
      - uses: JasonEtco/create-an-issue@v2
        with:
          filename: .github/ISSUE_TEMPLATE/release_ticket.md
        env:
          versionNumber: ${{ env.VERSION }}
          dueDate: ${{env.DUE_DATE}}
          releaseDate: ${{ env.RELEASE_DATE }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

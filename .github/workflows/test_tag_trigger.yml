name: GHA Testing

on:
  push:
    branches:
      - nr-gha-fixes

defaults:
  run:
    working-directory: VAMobile

# env:
#   GITHUB_TOKEN: ${{ secrets.GH_ACTIONS_PAT }}

jobs:
  cut_release_branch:
    name: Cut Release Branch
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          token: ${{ secrets.GH_ACTION_PAT }}

      - name: Set username and email
        run: |
          git config --global user.name 'VA Automation Bot'
          git config --global user.email 'va-mobileapp@adhocteam.us'

      - name: Cut release branch
        run: ./release_branch.sh
  # test_env_var:
  #   needs: cut_release_branch
  #   runs-on: ubuntu-latest
  #   name: Read exported variable
  #   steps:
  #     - run: |
  #         echo "$VERSION"
  #         echo "${{ env.VERSION }}"
  # android:
  #   name: Android RC Build
  #   needs:
  #     - cut_release_branch
  #     # - start_slack_thread
  #   uses: ./.github/workflows/build_android.yml
  #   secrets: inherit
  #   with:
  #     lane: rc
  #     ref: staging
  #     # slack_thread_ts: ${{needs.start_slack_thread.outputs.thread_ts}}



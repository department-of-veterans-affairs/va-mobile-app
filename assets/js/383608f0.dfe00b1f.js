"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7703],{21409:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Engineering/BackEnd/Architecture/Auth Diagrams","title":"Authentication Diagrams","description":"Username and Password Authorization Flow","source":"@site/docs/Engineering/BackEnd/Architecture/Auth Diagrams.md","sourceDirName":"Engineering/BackEnd/Architecture","slug":"/Engineering/BackEnd/Architecture/Auth Diagrams","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/Auth Diagrams","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Authentication Diagrams"},"sidebar":"tutorialSidebar","previous":{"title":"Address Update Flow","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/AddressUpdateFlow"},"next":{"title":"Background Workers and Caching","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/BackgroundWorkersAndCaching"}}');var t=a(74848),r=a(28453);const s={title:"Authentication Diagrams"},o=void 0,p={},c=[{value:"Username and Password Authorization Flow",id:"username-and-password-authorization-flow",level:2},{value:"Biometrics Flow for Username and Password Initial Login",id:"biometrics-flow-for-username-and-password-initial-login",level:2},{value:"Biometrics Flow for Username and Password Subsequent Login",id:"biometrics-flow-for-username-and-password-subsequent-login",level:2},{value:"VA: Health and Benefits Biometrics Initial Login",id:"va-health-and-benefits-biometrics-initial-login",level:2},{value:"VA: Health and Benefits Biometrics Subsequent Login",id:"va-health-and-benefits-biometrics-subsequent-login",level:2}];function d(e){const n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"username-and-password-authorization-flow",children:"Username and Password Authorization Flow"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Username and Password Authorization Flow",src:a(94066).A+"",width:"822",height:"408"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"sequenceDiagram\n    participant User\n    participant App\n    participant Server\n    User->>App: Enter username and password\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"biometrics-flow-for-username-and-password-initial-login",children:"Biometrics Flow for Username and Password Initial Login"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Biometrics Flow for Username and Password Initial Login",src:a(97379).A+"",width:"919",height:"422"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"sequenceDiagram\n    participant User\n    participant Keychain\n    participant App\n    participant Server\n    User->>App: Enter username and password\n    App--\x3e>User: Do you want to login with biometrics next time?\n    User->>App: Yes!\n    App->>Keychain: Here is the username and pw for this app, keep it safe, please\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"biometrics-flow-for-username-and-password-subsequent-login",children:"Biometrics Flow for Username and Password Subsequent Login"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Biometrics Flow for Username and Password Subsequent Login",src:a(42536).A+"",width:"910",height:"503"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"sequenceDiagram\n    participant User\n    participant Keychain\n    participant App\n    participant Server\n    App->>Keychain: Is there a username and pw saved for this app?\n    Keychain--\x3e>App: Yes there is!\n    App->>User: Can I please have your biometrics?\n    User--\x3e>App: Here you go!\n    App->>Keychain: Here are the biometrics, can you send the username/pw to me?\n    Keychain--\x3e>App: Here are the username and pw.\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"va-health-and-benefits-biometrics-initial-login",children:"VA: Health and Benefits Biometrics Initial Login"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Health and Benefits Biometrics Initial Login",src:a(23115).A+"",width:"912",height:"573"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"sequenceDiagram\n    participant User\n    participant Secure App Storage\n    participant App\n    participant SIS\n    participant Identity Provider\n    User->>App: Tap Login button\n    App->>SIS: Start the sign in process\n    SIS->>User: Which Identity Provider do you want?\n    User--\x3e>SIS: This one please.\n    SIS--\x3e>Identity Provider: Please authenticate this person at IAL2/AAL2/LOA3\n    Identity Provider->>User: Please send your username and password\n    User--\x3e>Identity Provider: Here they are\n    Identity Provider--\x3e>SIS: It's them, I'm sure of it\n    SIS--\x3e>App: Here is a code to get your tokens\n    App->>SIS: Please create a token and session for me\n    SIS--\x3e>App: Done and done! Here is the token\n    App->>User: Do you want to use biometrics to log in?\n    User--\x3e>App: Yes please!\n    App->>Secure App Storage: Please hang on to this for us and lock it with biometrics\n    Secure App Storage--\x3e>App: You got it!\n    App--\x3e>User: Display Auth Result\n"})}),"\n",(0,t.jsx)(n.h2,{id:"va-health-and-benefits-biometrics-subsequent-login",children:"VA: Health and Benefits Biometrics Subsequent Login"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Health and Benefits Biometrics Subsequent Login",src:a(33632).A+"",width:"902",height:"450"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"sequenceDiagram\n    participant User\n    participant Secure App Storage\n    participant App\n    participant SIS\n    App->>Secure App Storage: Is there a stored token?\n    Secure App Storage--\x3e>App: Yes there is\n    App->>User: Can I please have your biometrics?\n    User--\x3e>App: Here you go!\n    App->>Secure App Storage: Here are the biometrics, can you send the token to me?\n    Secure App Storage--\x3e>App: Here it is!\n    App->>SIS: Can I get a refreshed token, please? Here is the old one.\n    SIS--\x3e>App: Here you go, one new token.\n    App--\x3e>User: Display Auth Result\n"})}),"\n",(0,t.jsx)(n.p,{children:"In order to regenerate these graphs, add 'mermaid' to the end of the ``` at the beginning of each codeblock."})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},23115:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/health-and-benefits-biometrics-initial-login-6c0eeb69a16fb4c286a8e555018e10b1.png"},28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var i=a(96540);const t={},r=i.createContext(t);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(r.Provider,{value:n},e.children)}},33632:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/health-and-benefits-biometrics-subsequent-login-3c7352e14ed487f8fe014f3a24cd0545.png"},42536:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/biometrics-flow-for-username-and-password-subsequent-login-dc4480d9678629246ccd2ea8f8700a3e.png"},94066:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/username-and-password-authorization-flow-8f56c9ff39a716260cd4a305322fe65c.png"},97379:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/biometrics-flow-for-username-and-password-initial-login-d79aa634236accd1a397754617b91678.png"}}]);
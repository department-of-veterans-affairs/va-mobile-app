"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[514],{10103:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobModalFinal-6145f4673ee021943b26062adbb708ec.png"},12069:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobWaitingList-b9bd2dfba2f1245cd789d71734a3beeb.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var a=t(96540);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},36031:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobActionWaiting-531dc2ed1439dda4a0c19e30e63659cd.png"},39143:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobReviewDeployment-bea25e710143cc024d66f17396b273c6.png"},47650:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"DevOps/PackageScanning","title":"Package Scanning","description":"There may be some times that we need to scan packages that are being added to the repo to verify their contents and source. Below are the steps for some of the packages we may need to scan.","source":"@site/development/DevOps/PackageScanning.md","sourceDirName":"DevOps","slug":"/DevOps/PackageScanning","permalink":"/va-mobile-app/development/DevOps/PackageScanning","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Package Scanning","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Google signing keys","permalink":"/va-mobile-app/development/DevOps/AutomationCodeDocs/SigningKeys/google"},"next":{"title":"QA builds","permalink":"/va-mobile-app/development/DevOps/Overview"}}');var s=t(74848),i=t(28453);const o={title:"Package Scanning",sidebar_position:3},c=void 0,r={},d=[{value:"package.json",id:"packagejson",level:2},{value:"npm review",id:"npm-review",level:3},{value:"Guarddog Scan",id:"guarddog-scan",level:3},{value:"Results",id:"results",level:3}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"There may be some times that we need to scan packages that are being added to the repo to verify their contents and source. Below are the steps for some of the packages we may need to scan."}),"\n",(0,s.jsx)(n.h2,{id:"packagejson",children:"package.json"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u26a0\ufe0f IMPORTANT: \u26a0\ufe0f"})}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["You will need to be a member of the ",(0,s.jsx)(n.code,{children:"bypass-package-lock"})," protection group to complete this next step."]})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Currently any changes that are made to any ",(0,s.jsx)(n.code,{children:"package.json"})," files are reviewed before a merge is to happen. Upon approval, the rest of the scanning will complete. If the security-scan workflow detects a ",(0,s.jsx)(n.code,{children:"package.json"})," change, it will pass the workflow to the bypass-packag-check environent check. When this happens, a team is alerted that a package needs to be reviewed."]}),"\n",(0,s.jsxs)(n.p,{children:["As of now, we look at the PR and check for ",(0,s.jsx)(n.code,{children:"package.json"})," updates. Below you can see this is a script update that triggered the approval."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobilePackageUpdate",src:t(72891).A+"",width:"1356",height:"322"})}),"\n",(0,s.jsx)(n.h3,{id:"npm-review",children:"npm review"}),"\n",(0,s.jsxs)(n.p,{children:["The package will need to be checked against the npm listing for it. For this we can use ",(0,s.jsx)(n.code,{children:"npm info"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm info @testing-library/jest-dom\n\n@testing-library/jest-dom@6.9.1 | MIT | deps: 6 | versions: 82\nCustom jest matchers to test the state of the DOM\nhttps://github.com/testing-library/jest-dom#readme\n\nkeywords: testing, dom, jest, jsdom\n\ndist\n.tarball: https://registry.npmjs.org/@testing-library/jest-dom/-/jest-dom-6.9.1.tgz\n.shasum: 7613a04e146dd2976d24ddf019730d57a89d56c2\n.integrity: sha512-zIcONa+hVtVSSep9UT3jZ5rizo2BsxgyDYU7WFD5eICBE7no3881HGeb/QkGfsJs6JTkY1aQhT7rIPC7e+0nnA==\n.unpackedSize: 300.9 kB\n\ndependencies:\n@adobe/css-tools: ^4.4.0      aria-query: ^5.0.0            css.escape: ^1.5.1            dom-accessibility-api: ^0.6.3 picocolors: ^1.1.1            redent: ^3.0.0\n\nmaintainers:\n- testing-library-bot <testinglibraryoss@gmail.com>\n- kentcdodds <me@kentcdodds.com>\n- timdeschryver <timdeschryver@outlook.com>\n- patrickhulce <patrick.hulce@gmail.com>\n- dfcook <dfcook@hotmail.com>\n- gpx <polvara@gmail.com>\n- mpeyper <mpeyper7@gmail.com>\n- mihar-22 <rahim.alwer@gmail.com>\n- pago <patrick.gotthardt@trivago.com>\n- cmckinstry <carson.mckinstry@gmail.com>\n- thymikee <thymikee@gmail.com>\n- brrianalexis <brrianalexis.dev@gmail.com>\n- jdecroock <decroockjovi@gmail.com>\n- mdjastrzebski <mdjastrzebski@gmail.com>\n- eps1lon <silbermann.sebastian@gmail.com>\n- phryneas <mail@lenzw.de>\n- matanbobi <matanbobi@gmail.com>\n\ndist-tags:\nbeta: 5.7.0-beta.1  latest: 6.9.1\n\npublished 4 months ago by testing-library-bot <testinglibraryoss@gmail.com>\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"guarddog-scan",children:"Guarddog Scan"}),"\n",(0,s.jsxs)(n.p,{children:["After the ",(0,s.jsx)(n.code,{children:"npm info"})," check we run a python package called ",(0,s.jsx)(n.code,{children:"guarddog"}),". ",(0,s.jsx)(n.code,{children:"guarddog"})," is maintained by DataDog and it checks for malicious packages. ",(0,s.jsx)(n.a,{href:"https://github.com/DataDog/guarddog",children:"GitHub Link"}),". To make this easy I have installed ",(0,s.jsx)(n.code,{children:"uv"})," which is a python package and project manager. Instead of installing python packages, I leverage ",(0,s.jsx)(n.code,{children:"uvx"})," which runs the package on-demand. I have created an alias called ",(0,s.jsx)(n.code,{children:"check"})," that will run the package scan and output the results. Installation Documentation for ",(0,s.jsx)(n.code,{children:"uv"})," can be found ",(0,s.jsx)(n.a,{href:"https://docs.astral.sh/uv/getting-started/installation/",children:"here"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"check is an alias for uvx guarddog npm scan\n\ncheck @testing-library/jest-dom\nInstalled 79 packages in 166ms\n\nFound 0 potentially malicious indicators scanning @testing-library/jest-dom\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"results",children:"Results"}),"\n",(0,s.jsxs)(n.p,{children:["Once you have the results, locate the job that is waiting for the approval. You can find this on the ",(0,s.jsx)(n.a,{href:"https://github.com/department-of-veterans-affairs/va-mobile-app/actions",children:"Actions"})," page of the repo."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileRepoActions",src:t(84614).A+"",width:"1483",height:"439"})}),"\n",(0,s.jsxs)(n.p,{children:["Click on the ",(0,s.jsx)(n.code,{children:"Status"})," option and type in ",(0,s.jsx)(n.code,{children:"waiting"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileActionsWaiting",src:t(36031).A+"",width:"990",height:"384"})}),"\n",(0,s.jsx)(n.p,{children:"Locate the run in question (In this case we will use screenshot update) and click on it."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileActionWaiting",src:t(12069).A+"",width:"1350",height:"494"})}),"\n",(0,s.jsxs)(n.p,{children:["On the Review Deployments window you will see the job waiting. Click on ",(0,s.jsx)(n.code,{children:"Review deployments"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileReviewDeployment",src:t(39143).A+"",width:"1686",height:"881"})}),"\n",(0,s.jsxs)(n.p,{children:["In the Review Deployment Modal, make sure you are in the group, check the ",(0,s.jsx)(n.code,{children:"bypass-package-lock"})," box and enter the reasoning for deployment. If it is approved, click ",(0,s.jsx)(n.code,{children:"Approve and Deploy"}),". If it is denied, click ",(0,s.jsx)(n.code,{children:"reject"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileDeployModal",src:t(10103).A+"",width:"643",height:"388"})}),"\n",(0,s.jsx)(n.p,{children:"For documentation purposes, add a comment to the PR that shows the scan status also so it is documented."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"MobileCommentStatus",src:t(58969).A+"",width:"821",height:"958"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},58969:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobCommentStatus-84c3d7b99ad51bb30edc5e402d2fc7d4.png"},72891:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobPackageUpdate-743135babe740d715514161ecf3715be.png"},84614:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mobActionsMain-584ef90f5ba6f106480f5cbe8cdd360e.png"}}]);
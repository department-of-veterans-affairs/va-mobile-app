"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3492],{28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>t});var i=n(96540);const r={},a=i.createContext(r);function o(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:s},e.children)}},40374:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Engineering/BackEnd/Architecture/DirectoryLayout","title":"Directory Layout","description":"The backend code is located in the vets-api) repo. The","source":"@site/docs/Engineering/BackEnd/Architecture/DirectoryLayout.md","sourceDirName":"Engineering/BackEnd/Architecture","slug":"/Engineering/BackEnd/Architecture/DirectoryLayout","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/DirectoryLayout","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Directory Layout"},"sidebar":"tutorialSidebar","previous":{"title":"Devops","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/Devops"},"next":{"title":"Endpoint Creation Checklist","permalink":"/va-mobile-app/docs/Engineering/BackEnd/Architecture/Endpoint Creation Checklist"}}');var r=n(74848),a=n(28453);const o={title:"Directory Layout"},t=void 0,l={},c=[{value:"Controllers Directory",id:"controllers-directory",level:2},{value:"Models Directory",id:"models-directory",level:2},{value:"Standard Models",id:"standard-models",level:3},{value:"Adapters",id:"adapters",level:3},{value:"Contracts",id:"contracts",level:3},{value:"Policies",id:"policies",level:2},{value:"Serializers",id:"serializers",level:2},{value:"Services",id:"services",level:2},{value:"Workers",id:"workers",level:2},{value:"Helpers",id:"helpers",level:2},{value:"Testing",id:"testing",level:2},{value:"Docs",id:"docs",level:2},{value:"Misc",id:"misc",level:2},{value:"Lib",id:"lib",level:3},{value:"Config",id:"config",level:3},{value:"DB",id:"db",level:3}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["The backend code is located in the ",(0,r.jsx)(s.a,{href:"https://github.com/department-of-veterans-affairs/vets-api%5D",children:"vets-api"})," repo. The\nmajority of the code can be found in the ",(0,r.jsx)(s.a,{href:"https://github.com/department-of-veterans-affairs/vets-api/tree/1721381f3ca2c3ca65f5be8dbbcf4886f02e067d/modules/mobile",children:"/modules/mobile/"}),"\ndirectory. The module is laid out much like the root of a standard rails project, for instance, it has ",(0,r.jsx)(s.code,{children:"app/controllers"})," and\n",(0,r.jsx)(s.code,{children:"app/models"})," directories. With that knowledge, you can usually navigate to the code you want fairly easily."]}),"\n",(0,r.jsx)(s.h2,{id:"controllers-directory",children:"Controllers Directory"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/controllers  \n"})}),"\n",(0,r.jsx)(s.p,{children:"Versioning of controllers happens when there is an incompatibility with schema changes from upstream. This does not\ninclude new fields additions."}),"\n",(0,r.jsx)(s.h2,{id:"models-directory",children:"Models Directory"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/models  \n"})}),"\n",(0,r.jsx)(s.p,{children:"The models directory contains several specific types of classes."}),"\n",(0,r.jsx)(s.h3,{id:"standard-models",children:"Standard Models"}),"\n",(0,r.jsx)(s.p,{children:"Even though ActiveRecord is not in use, there are files here that still define the representations of data."}),"\n",(0,r.jsx)(s.h3,{id:"adapters",children:"Adapters"}),"\n",(0,r.jsxs)(s.p,{children:["Adapters are used whenever we need to ",(0,r.jsx)(s.em,{children:"massage"})," data from one schema to another. For instance, if we're upgrading to a new upstream endpoint and the data from the new endpoint changed names and/or is in a different format, we use adapters\nso that the new data is backwards compatible."]}),"\n",(0,r.jsx)(s.h3,{id:"contracts",children:"Contracts"}),"\n",(0,r.jsx)(s.p,{children:"Used for validating params in controllers"}),"\n",(0,r.jsx)(s.h2,{id:"policies",children:"Policies"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/policies\n"})}),"\n",(0,r.jsx)(s.p,{children:"Authorization policies used to verify access to routes and resources"}),"\n",(0,r.jsx)(s.h2,{id:"serializers",children:"Serializers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/serializers\n"})}),"\n",(0,r.jsx)(s.p,{children:"Definitions of how different models should be serialized. These all conform to the JSON API standard."}),"\n",(0,r.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/services\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Objects used for communicating with upstream service objects. These can be a mixture of services we've written directly, or proxy objects we've written that communicate with other teams' objects. Usually objects here inherit from\n",(0,r.jsx)(s.code,{children:"Common::Client::Base"})," or are related to configuration for such objects."]}),"\n",(0,r.jsx)(s.h2,{id:"workers",children:"Workers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/workers\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://department-of-veterans-affairs.github.io/va-mobile-app/docs/Engineering/BackEnd/Architecture/BackgroundWorkersAndCaching",children:"View information about vackground workers"})}),"\n",(0,r.jsx)(s.h2,{id:"helpers",children:"Helpers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/app/helpers\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Not traditional rails helpers because this is a pure api without views. These are just POROs. Some do make requests\nto upstream services and, as such, are indistinguishable from our ",(0,r.jsx)(s.code,{children:"proxies"})]}),"\n",(0,r.jsx)(s.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(s.p,{children:"The various paths for testing are as follows"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Specs\n/modules/mobile/spec/\n\n# VCR Cassettes\n/spec/support/vcr_cassettes/mobile/\n"})}),"\n",(0,r.jsx)(s.h2,{id:"docs",children:"Docs"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/docs\n"})}),"\n",(0,r.jsx)(s.h2,{id:"misc",children:"Misc"}),"\n",(0,r.jsx)(s.h3,{id:"lib",children:"Lib"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/lib\n"})}),"\n",(0,r.jsx)(s.p,{children:"Traditionally, lib contains code that is not specific to the rails app. our contains:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Validation errors classes"}),"\n",(0,r.jsx)(s.li,{children:"Engines"}),"\n",(0,r.jsx)(s.li,{children:"Scripts"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"config",children:"Config"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/config\n"})}),"\n",(0,r.jsx)(s.p,{children:"Standard rails config, such as routes"}),"\n",(0,r.jsx)(s.h3,{id:"db",children:"DB"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"/modules/mobile/db\n"})}),"\n",(0,r.jsx)(s.p,{children:"Data migrations, though we seldom used because we rarely have db backed models"})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
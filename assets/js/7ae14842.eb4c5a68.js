"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9347],{7644:(e,n,t)=>{t.d(n,{A:()=>p});var o=t(96540),l=t(54610),a=t(3384),s=t(31347),r=t(28057),i=t(84476);const c=e=>{let{props:n}=e;return n?o.createElement(o.Fragment,null,i.Ay.isEmpty(n)?o.createElement("pre",{className:"preText"},"This component does not have props defined"):o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Name"),o.createElement("th",null,"Type"),o.createElement("th",null,"Default Value"),o.createElement("th",null,"Required"),o.createElement("th",null,"Description"))),o.createElement("tbody",null,Object.keys(n).map((e=>o.createElement("tr",{key:e},o.createElement("td",null,o.createElement("code",null,e)),o.createElement("td",{style:{minWidth:200}},n[e].type?.name),o.createElement("td",null,n[e].defaultValue&&n[e].defaultValue.value.toString()),o.createElement("td",null,n[e].required?"Yes":"No"),o.createElement("td",null,n[e].description))))))):null};function p(e){const n=(0,r.d)(e.componentName),{description:t,displayName:i,props:p}=n[0],d=`How to use the ${i} component`,u=`Full code for the ${i} component`;return o.createElement(o.Fragment,null,t,o.createElement("br",null),o.createElement("br",null),o.createElement(a.A,null,o.createElement(s.A,{value:"props",label:"Properties"},o.createElement(c,{props:p})),o.createElement(s.A,{value:"example",label:"Example"},e.example&&o.createElement(l.A,{title:d,className:"language-tsx test"},e.example)),o.createElement(s.A,{value:"code",label:"Source Code"},e.codeString&&o.createElement(l.A,{title:u,className:"language-tsx"},e.codeString)),o.createElement(s.A,{value:"accessibility",label:"Accessibility"},o.createElement("pre",{className:"preText"},e.accessibilityInfo))))}},28057:(e,n,t)=>{t.d(n,{d:()=>l});var o=t(2736);const l=e=>(0,o.Ay)()["docusaurus-plugin-react-docgen-typescript"].default.filter((n=>n.displayName===e))},34778:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>f,exampleString:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var o=t(58168),l=(t(96540),t(15680));t(41873),t(54610);const a="import React, { FC, ReactElement, useCallback, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport {\n  AccessibilityProps,\n  Modal,\n  Pressable,\n  PressableProps,\n  TouchableWithoutFeedback,\n  TouchableWithoutFeedbackProps,\n  View,\n} from 'react-native'\nimport { useSafeAreaInsets } from 'react-native-safe-area-context'\n\nimport { Icon, IconProps } from '@department-of-veterans-affairs/mobile-component-library'\n\nimport { Box, BoxProps, TextView, TextViewProps, VAScrollView } from 'components'\nimport { Events } from 'constants/analytics'\nimport { a11yHintProp, a11yValueProp } from 'utils/accessibility'\nimport { logAnalyticsEvent } from 'utils/analytics'\nimport { getTranslation } from 'utils/formattingUtils'\nimport { useTheme } from 'utils/hooks'\n\nimport {\n  generateA11yValue,\n  generateInputA11yLabel,\n  getInputWrapperProps,\n  removeInputErrorMessage,\n  renderInputError,\n  renderInputLabelSection,\n} from '../formFieldUtils'\nimport PickerList, { PickerListItemObj } from './PickerList'\n\n/**\n * Signifies type of each item in list of {@link pickerOptions}\n */\nexport type PickerItem = {\n  /** label is the text displayed to the user for the item */\n  label: string\n  /** value is the unique value of the item, used to update and keep track of the current label displayed */\n  value: string\n  /** icon to show */\n  icon?: IconProps\n}\n\nexport type VAModalPickerProps = {\n  /** Currently selected item from list of options */\n  selectedValue: string\n  /** Called when the selected value is changed */\n  onSelectionChange: (selectValue: string) => void\n  /** Called when the cancel button is pressed */\n  onClose?: () => void\n  /** list of items of containing types label and value for each option in the picker */\n  pickerOptions: Array<PickerItem>\n  /** i18n key for the text label next the picker field */\n  labelKey?: string\n  /** optional boolean that disables the picker when set to true */\n  disabled?: boolean\n  /** optional boolean that displays required text next to label if set to true */\n  isRequiredField?: boolean\n  /** optional key for string to display underneath label */\n  helperTextKey?: string\n  /** optional callback to update the error message if there is an error */\n  setError?: (error?: string) => void\n  /** if this exists updated picker styles to error state */\n  error?: string\n  /** If true, will include a blank option at the top of the list with a blank value */\n  includeBlankPlaceholder?: boolean\n  /** renders a button instead of form field */\n  displayButton?: boolean\n  /** i18n key text for the name of the button */\n  buttonText?: string\n  /** i18n key  text for the picker confirm button */\n  confirmBtnText?: string\n  /** shows the modal by default */\n  showModalByDefault?: boolean\n  /** Optional TestID for scrollView */\n  testID?: string\n  /** Optional TestID for cancel button */\n  cancelTestID?: string\n  /** Option TestID for apply button */\n  confirmTestID?: string\n}\n\n/**A common component to display a picker for the device with an optional label*/\nconst VAModalPicker: FC<VAModalPickerProps> = ({\n  selectedValue,\n  onSelectionChange,\n  onClose,\n  pickerOptions,\n  labelKey,\n  disabled,\n  isRequiredField,\n  helperTextKey,\n  setError,\n  error,\n  includeBlankPlaceholder,\n  displayButton = false,\n  buttonText,\n  confirmBtnText,\n  testID,\n  showModalByDefault,\n  cancelTestID,\n  confirmTestID,\n}) => {\n  const [modalVisible, setModalVisible] = useState(false)\n  const theme = useTheme()\n  const { t } = useTranslation()\n  const insets = useSafeAreaInsets()\n\n  const [currentSelectedValue, setCurrentSelectedValue] = useState(selectedValue)\n  const [focusUpdated, setFocusUpdated] = useState(false)\n  const [isFocused, setIsFocused] = useState(false)\n\n  useEffect(() => {\n    removeInputErrorMessage(isFocused, error, setError, focusUpdated, setFocusUpdated)\n  }, [isFocused, selectedValue, error, setError, focusUpdated])\n\n  const showModal = useCallback((): void => {\n    logAnalyticsEvent(Events.vama_modalpick_open(labelKey ? getTranslation(labelKey, t) : testID ? testID : ''))\n    if (!disabled) {\n      setIsFocused(true)\n      setModalVisible(true)\n      if (!snackBar) {\n        logAnalyticsEvent(Events.vama_snackbar_null('VAModalPicker'))\n      }\n      snackBar?.hideAll()\n    }\n  }, [disabled, labelKey, testID, t])\n\n  useEffect(() => {\n    showModalByDefault && showModal()\n  }, [showModalByDefault, showModal])\n\n  const onConfirm = (): void => {\n    logAnalyticsEvent(\n      Events.vama_modalpick_sel(labelKey ? getTranslation(labelKey, t) : testID ? testID : '', currentSelectedValue),\n    )\n    onSelectionChange(currentSelectedValue)\n    setModalVisible(false)\n    setIsFocused(false)\n    setFocusUpdated(true)\n  }\n\n  const onCancel = (): void => {\n    onClose && onClose()\n    // Reset the selected picker item\n    setCurrentSelectedValue(selectedValue)\n\n    setModalVisible(false)\n    setIsFocused(false)\n    setFocusUpdated(true)\n  }\n\n  const handleSelection = (selectionVal: string): void => {\n    setCurrentSelectedValue(selectionVal)\n  }\n\n  const allPickerOptions: Array<PickerItem> = includeBlankPlaceholder\n    ? [\n        {\n          value: '',\n          label: '',\n        },\n      ].concat(pickerOptions)\n    : pickerOptions\n\n  const pickerListItems: Array<PickerListItemObj> = allPickerOptions.map((pickerOption) => {\n    return {\n      text: pickerOption.label,\n      onPress: () => {\n        handleSelection(pickerOption.value)\n      },\n      isSelected: currentSelectedValue === pickerOption.value,\n      icon: pickerOption.icon,\n    }\n  })\n\n  const currentlySelectedOption = allPickerOptions.find((el) => el.value === selectedValue)\n  const inputA11yLabel = generateInputA11yLabel(labelKey, isRequiredField, helperTextKey, error, t, 'picker')\n\n  const parentProps: AccessibilityProps = {\n    ...a11yValueProp({ text: generateA11yValue(currentlySelectedOption?.label, isFocused, t) }),\n    accessibilityRole: 'spinbutton',\n  }\n\n  const renderSelectionBox = (): ReactElement => {\n    const wrapperProps = getInputWrapperProps(theme, error, false)\n\n    const valueBox = (\n      <Box {...wrapperProps}>\n        <Box width=\"100%\" display={'flex'} flexDirection={'row'} justifyContent={'space-between'} alignItems={'center'}>\n          <TextView testID={testID} variant=\"MobileBody\" flex={1}>\n            {currentlySelectedOption?.label}\n          </TextView>\n          <Box ml={16} my={12}>\n            <Icon name=\"UnfoldMore\" fill={theme.colors.icon.pickerIcon} width={30} height={30} />\n          </Box>\n        </Box>\n      </Box>\n    )\n\n    const content = (\n      <Box>\n        {labelKey && renderInputLabelSection(error, isRequiredField, labelKey, t, helperTextKey)}\n        {!!error && renderInputError(error)}\n        {valueBox}\n      </Box>\n    )\n\n    return (\n      <Pressable onPress={showModal} accessible={true} accessibilityLabel={inputA11yLabel} {...parentProps}>\n        {content}\n      </Pressable>\n    )\n  }\n\n  const renderButton = () => {\n    const color = disabled ? 'actionBarDisabled' : 'actionBar'\n\n    const props: TouchableWithoutFeedbackProps = {\n      onPress: showModal,\n      disabled,\n      accessibilityRole: 'button',\n      accessible: true,\n      accessibilityLabel: getTranslation(buttonText || '', t),\n      accessibilityState: disabled ? { disabled: true } : { disabled: false },\n    }\n\n    return (\n      <TouchableWithoutFeedback {...props}>\n        <Box\n          pr={theme.dimensions.headerButtonSpacing}\n          height={theme.dimensions.headerHeight}\n          justifyContent={'center'}\n          pl={theme.dimensions.headerLeftButtonFromTextPadding}>\n          <TextView variant=\"ActionBar\" color={color} allowFontScaling={false} accessible={false}>\n            {getTranslation(buttonText || '', t)}\n          </TextView>\n        </Box>\n      </TouchableWithoutFeedback>\n    )\n  }\n\n  const actionsBarBoxProps: BoxProps = {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    backgroundColor: 'pickerControls',\n    minHeight: theme.dimensions.touchableMinHeight,\n    py: theme.dimensions.buttonPadding,\n    px: theme.dimensions.gutter,\n    ml: insets.left,\n    mr: insets.right,\n  }\n\n  const topPadding = insets.top + 60\n\n  const cancelLabel = t('cancel')\n  const confirmLabel = getTranslation(confirmBtnText || 'done', t)\n\n  const cancelButtonProps: PressableProps = {\n    accessible: true,\n    accessibilityRole: 'button',\n    accessibilityLabel: cancelLabel,\n    ...a11yHintProp(t('cancel.picker.a11yHint')),\n  }\n\n  const confirmButtonProps: PressableProps = {\n    accessible: true,\n    accessibilityRole: 'button',\n    accessibilityLabel: confirmLabel,\n    ...a11yHintProp(t('done.picker.a11yHint')),\n  }\n\n  const commonButtonProps: TextViewProps = {\n    variant: 'MobileBody',\n    color: 'link',\n    allowFontScaling: false,\n    py: 3, // bump up the padding to make touch target a bit bigger #2740\n  }\n\n  return (\n    <View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        statusBarTranslucent={true}\n        visible={modalVisible}\n        supportedOrientations={['portrait', 'landscape']}\n        onRequestClose={() => {\n          setModalVisible(!modalVisible)\n        }}>\n        <Box flex={1} flexDirection=\"column\" accessibilityViewIsModal={true}>\n          <Box flexGrow={1} backgroundColor=\"modalOverlay\" opacity={0.8} pt={topPadding} />\n          <Box backgroundColor=\"list\" pb={insets.bottom} flexShrink={1}>\n            <Box {...actionsBarBoxProps}>\n              <Pressable onPress={onCancel} {...cancelButtonProps} testID={cancelTestID}>\n                <TextView {...commonButtonProps}>{cancelLabel}</TextView>\n              </Pressable>\n              <Box flex={4}>\n                <TextView variant=\"MobileBodyBold\" textAlign={'center'} allowFontScaling={false}>\n                  {getTranslation(labelKey || '', t)}\n                </TextView>\n              </Box>\n              <Pressable onPress={onConfirm} {...confirmButtonProps} testID={confirmTestID}>\n                <TextView {...commonButtonProps}>{confirmLabel}</TextView>\n              </Pressable>\n            </Box>\n            <VAScrollView bounces={false}>\n              <PickerList items={pickerListItems} />\n            </VAScrollView>\n          </Box>\n        </Box>\n      </Modal>\n      {!showModalByDefault && (displayButton ? renderButton() : renderSelectionBox())}\n    </View>\n  )\n}\n\nexport default VAModalPicker\n";var s=t(7644);const r={},i=void 0,c={unversionedId:"Flagship design library/Components/Selection and Input/Pickers/VAModalPicker",id:"Flagship design library/Components/Selection and Input/Pickers/VAModalPicker",title:"VAModalPicker",description:"",source:"@site/docs/Flagship design library/Components/Selection and Input/Pickers/VAModalPicker.mdx",sourceDirName:"Flagship design library/Components/Selection and Input/Pickers",slug:"/Flagship design library/Components/Selection and Input/Pickers/VAModalPicker",permalink:"/va-mobile-app/docs/Flagship design library/Components/Selection and Input/Pickers/VAModalPicker",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"PickerList",permalink:"/va-mobile-app/docs/Flagship design library/Components/Selection and Input/Pickers/PickerList"},next:{title:"Tags",permalink:"/va-mobile-app/docs/Flagship design library/Components/Tags/"}},p={},d=[],u="<VAModalPicker \nselectedValue={selected} \nonSelectionChange={(textValue) => { setSelected(textValue) }} \npickerOptions={ [ { label: 'item', value: 'itemValue' } ] }/>",m={toc:d,exampleString:u},b="wrapper";function f(e){let{components:n,...t}=e;return(0,l.yg)(b,(0,o.A)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.yg)(s.A,{componentName:"VAModalPicker",example:u,codeString:a,mdxType:"ComponentTopInfo"}))}f.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4075],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,k=d["".concat(p,".").concat(h)]||d[h]||l[h]||a;return n?r.createElement(k,i(i({ref:t},u),{},{components:n})):r.createElement(k,i({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},43412:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),i=["components"],s={},p="API Tokens",c={unversionedId:"Engineering/BackEnd/Testing/ApiTokens",id:"Engineering/BackEnd/Testing/ApiTokens",title:"API Tokens",description:"Authorization and token types",source:"@site/docs/Engineering/BackEnd/Testing/ApiTokens.md",sourceDirName:"Engineering/BackEnd/Testing",slug:"/Engineering/BackEnd/Testing/ApiTokens",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Testing/ApiTokens",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Statsd Metrics",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Monitoring/Statsd"},next:{title:"Prerequisites",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Testing/Prerequisites"}},u=[{value:"Authorization and token types",id:"authorization-and-token-types",children:[],level:2},{value:"Fetching API tokens",id:"fetching-api-tokens",children:[],level:2},{value:"Working on the token app",id:"working-on-the-token-app",children:[],level:2}],l={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"api-tokens"},"API Tokens"),(0,a.kt)("h2",{id:"authorization-and-token-types"},"Authorization and token types"),(0,a.kt)("p",null,"The mobile app currently uses two authorization services: IAM and SIS (short for Sign-In Service). IAM is a third party service and SIS is an in-house VA auth service. We expect to eventually sunset IAM in favor of SIS."),(0,a.kt)("p",null,"The tokens are visually distinct: IAM tokens are 20 characters long, while SIS tokens are over a thousand characters long."),(0,a.kt)("p",null,"The one important functional difference is that you have to include an additional header when using SIS tokens: ",(0,a.kt)("inlineCode",{parentName:"p"},"Authentication-Method: SIS")),(0,a.kt)("h2",{id:"fetching-api-tokens"},"Fetching API tokens"),(0,a.kt)("p",null,"We host a web app on heroku for fetching api tokens. You can fetch tokens in two ways:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Manual: Go to the ",(0,a.kt)("a",{parentName:"p",href:"https://va-mobile-cutter.herokuapp.com"},"token generator web app")," and log in with a test user. User credentials are in 1Password.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Automated: These requests use basic auth (ask teammates for username and password) and will only work if the test user has previously been logged in via the manual approach and the user's refresh token is still valid. There are routes for fetching IAM tokens:"))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GET https://va-mobile-cutter.herokuapp.com/auth/iam/token/judy.morrison@id.me")),(0,a.kt)("p",null,"And SIS tokens:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GET https://va-mobile-cutter.herokuapp.com/auth/sis/token/judy.morrison@id.me")),(0,a.kt)("h2",{id:"working-on-the-token-app"},"Working on the token app"),(0,a.kt)("p",null,"The code for the token fetcher app can be found ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/adhocteam/va-mobile-sampleweb"},"here")," and instructions for development can be found in the README. To work on the app, you will need write access to the repo and admin access to the heroku instance."))}d.isMDXComponent=!0}}]);